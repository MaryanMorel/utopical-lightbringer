doctype html
html(lang="en")
	head
		title Processing
		link(href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css" rel="stylesheet")
		link(rel="stylesheet", href="//ajax.googleapis.com/ajax/libs/angular_material/0.8.3/angular-material.min.css")
		link(rel="stylesheet", href="https://fonts.googleapis.com/css?family=RobotoDraft:300,400,500,700,400italic")
		link(rel="stylesheet/less", href="custom_style.less")
		script(src="less.js")
		script(src="//ajax.googleapis.com/ajax/libs/angularjs/1.3.6/angular.min.js")
		script(src="//ajax.googleapis.com/ajax/libs/angularjs/1.3.6/angular-animate.min.js")
		script(src="//ajax.googleapis.com/ajax/libs/angularjs/1.3.5/angular-aria.min.js")
		script(src="//ajax.googleapis.com/ajax/libs/angular_material/0.8.3/angular-material.min.js")
		meta(http-equiv="refresh", content=(gif.delay-0.1))

	body
		md-card#contentCard(style="position:absolute; left:50%; top:50%; background-color: white; height:500px; width:300px;")
			md-card-content
				h1 Proccessing
					span#wait
				p We are currently detecting amazing topics!
				

				h3=gif.text 
				-var gifPath = 'images/loading_gif/' + gif.filename
				img#waitingGif(src=gifPath, style="display:block; margin-left:auto; margin-right:auto;", alt=gif.text)

				a(href=gif.source, style="float: right; margin-top: 7px;") source
				
		
		script(type="text/javascript").
			var dots = window.setInterval( function() {
				var wait = document.getElementById("wait");
				if ( wait.innerHTML.length > 5 ) 
					wait.innerHTML = ".";
				else 
					wait.innerHTML += ".";
				}, 500);
				
			console.log('#{gif.filename}')


			var img = document.getElementById('waitingGif'); 
			var width = img.clientWidth;
			var height = img.clientHeight;

			var gifPath = 'images/loading_gif/' + '#{gif.filename}'
			document.getElementById("waitingGif").src = "yo";
			document.getElementById("waitingGif").src = gifPath;

			var contentCard = document.getElementById("contentCard");// + height;
			contentCard.style.height = (200 + height) + 'px';
			contentCard.style.width = (60 + width) + 'px';
			contentCard.style.marginTop = -(200 + height)/2 + 'px';
			contentCard.style.marginLeft = -(60 + width)/2 + 'px';
